---
import Breadcrumbs from "./Breadcrumbs.astro";

interface Props {
  mode?: "editor" | "content" | "default";
  breadcrumbs?: {
    url?: string;
    title: string;
  }[];
}

import icon from "../assets/icon-burder.svg";

const iconPath = `url(${icon.src})`;
const iconWidth = `${icon.width}px`;
const iconHeight = `${icon.height}px`;

const { mode = "default", breadcrumbs } = Astro.props;
---

<header slot="header" class="header">
  <a class="logo" href="/"><span>+</span><span>+</span><span>+</span></a>
  {
    (mode === "editor" || mode === "content") && (
      <Breadcrumbs breadcrumbs={breadcrumbs} />
    )
  }
  {
    mode === "editor" && (
      <button class="open-dialog">
        <span class="sr-only">Закрыть</span>
      </button>
    )
  }
  {
    (mode === "default" || mode === "content") && (
      <nav>
        <a href="/about">О проекте</a>
      </nav>
    )
  }
</header>

<style
  define:vars={{
    iconPath,
    iconWidth,
    iconHeight,
  }}
>
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  @keyframes rotate {
    to {
      transform: rotate(90deg);
    }
  }

  .logo {
    text-decoration: none;
    color: inherit;
    font-size: 2.5rem;
  }

  .logo span {
    display: inline-block;
  }

  .logo:hover span {
    animation: rotate 1s infinite ease-in-out;
  }

  .logo span:nth-child(1) {
    animation-delay: 0.05s;
  }

  .logo span:nth-child(2) {
    animation-delay: 0.1s;
  }

  .logo span:nth-child(3) {
    animation-delay: 0.15s;
  }

  .open-dialog {
    border: none;
    background-color: transparent;
    color: inherit;
    transition: opacity 0.3s;
  }

  .open-dialog::before {
    content: "";
    display: block;
    width: var(--iconWidth);
    height: var(--iconHeight);
    background-image: var(--iconPath);
  }

  .open-dialog:hover {
    opacity: 0.7;
  }
</style>
