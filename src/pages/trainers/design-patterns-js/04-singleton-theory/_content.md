---
layout: ~/layouts/ContentLayout.astro
title: "Паттерн Singleton (Синглтон), теория"
---

Паттерн Singleton применим к классам в JS. Согласно этому паттерну у класса может быть только один инстанс, то есть объект создаётся только в одном экземпляре. Обычно это реализуется внутри класса так: новый инстанс создаётся только в случае, если ранее ещё ни одного инстанса создано не было. Если же инстанс уже существует, то возвращается ссылка на него.

Синглтоны отличаются от статических классов тем, что их инициализацию можно отложить до тех пор, пока, например, не получены нужные данные или пока не произошло какое-то пользовательское действие.

С помощью ES-модулей можно легко реализовать Singleton благодаря сокрытию имплементации внутри модуля:

```js
// singleton.js

let instance;

class Singleton {
  constructor() {
    if (!instance) {
      instance = this;
    }
    return instance;
  }
}

export default Singleton;
```

```js
// app.js

const inst1 = new Singleton();
const inst2 = new Singleton();

// inst1 === inst2 -> true
```

Такой подход может быть полезен, когда нужен один «глобальный» объект, координирующий действия всей системы. Это как преимущество (не нужно прокидывать глобальный объект внутрь каждого модуля, а просто везде доступна «глобальная переменная»), так и недостаток (в коде увеличивается связность, появляются неявные зависимости, размываются зоны ответственности).

Также порой непонятно является ли определённый класс Синглтоном или обычным классом, что может привести к его неверному использованию (попытка создания нескольких инстансов класса).
