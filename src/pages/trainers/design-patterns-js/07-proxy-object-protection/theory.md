---
title: "Паттерн Proxy (Прокси), практика: защищённый объект с Proxy"
---

Среди юзкейсов `Proxy` есть «встраивание» валидации в объект. То есть перед заданием значения свойства `set()` можно проверить, что значение удовлетворяет определённым условиям.

Представьте, что объекту нужно добавить «защиту», чтобы в него нельзя было добавить новые поля, но при этом можно было изменять значения уже имеющихся.

То есть нужно реализовать функцию, которая принимает объект, внутри создаёт для этого объекта `Proxy` и возвращает прокси-объект. Внутри `Proxy` переопределяется метод `set(target, property, value)` со следующими условиями:

- если `set()` срабатывает для свойства `property`, которое уже есть в объекте `target` (то есть задаётся уже существующиее в объекте свойство), то в этом случае нужно выполнить задание `target[property] = value` и вернуть из функции `true`
- если же свойства `property` в `target` нет, то есть выполняется условие `!(property in target)`, то тогда нужно бросить ошибку `throw new Error('В объект нельзя добавлять  новые свойства')`

Реализуйте в модуле `lib.js` функцию `createProtectedObject` согласно этим условиям.
