---
title: "Паттерн Strategy (Стратегия), практика: стратегии доступа для роли пользователей"
---

Представьте, что вы разрабатываете приложение CMS (Content Management System), которое должно по-разному себя вести в зависимости от роли текущего пользователя.

В приложении реализовано две сущности: пользователь и статья.

Пользователь имеет поле `id`:

```js
const user = {
  id: 100,
  name: "Иван Иванов",
};
```

Статья имеет собственное поле `id` и поле `ownerId`, которое привязывается к `id` пользователя-владельца.

```js
const article = {
  id: 1,
  ownerId: 100,
  title: "Название статьи",
};
```

Если пользователь админ (роль `admin`), то он может редактировать и удалять любую статью.

Обычный зарегистрированный пользователь (роль `user`) может редактировать свои статьи, но не может их удалять.

А пользователь-гость (роль `guest`) может только просматривать статьи, но не может с ними выполнять какие-либо действия (редактировать или удалять).

В приложении уже реализовано отображение статьи с кнопками действия (редактирование/удаление) для каждой из ролей в компоненте `Article.js`. Внутри компонента происходит выбор стратегии проверки прав на основе роли пользователя.

Вам нужно определить стратегии действий для трёх ролей пользователей. Нужно оформить их в модуле `permissionStrategies.js`. «Хранилище стратегий» представляет собой объект с полями:

```js
const permissionStrategies = {
  название_роли_1: {
    canEdit: () => /* возвращает boolean для роли */,
    canDelete: () => /* возвращает boolean для роли */,
  },
  название_роли_2: {
    canEdit: () => /* возвращает boolean для роли */,
    canDelete: () => /* возвращает boolean для роли */,
  },
  /* ... */
}
```

Методы `canEdit` и `canDelete` в зависимости от роли пользователя возвращают разные булевы значения.

Для роли `admin` методы `canEdit` и `canDelete` должны всегда возвращать `true`.

Для роли `guest` методы `canEdit` и `canDelete` должны всегда возвращать `false`.

А вот для роли `user`:

- метод `canDelete` должен всегда возвращать `false`
- метод `canEdit` должен принимать в параметрах `ownerId` (id владельца статьи) и `currentUserId` (id текущего пользователя), и в случае если `ownerId` совпадает с `currentUserId`, то должен возвращать `true`, иначе — `false`
