---
title: "Паттерн Singleton (Синглтон), практика: стор как Singleton"
---

Как мы уже выяснили, Singleton — это единый «глобальный» объект для координации действий системы. То есть по сути Singleton может быть «глобальным» хранилищем каких-то общих для всей системы данных с методами их добавления, извлечения и удаления.

Представьте, что нужно сделать отдельный модуль со стором данных пользователя приложения.

Внутри модуля нужно создать класс `SingletonStore` с методами:

- `set(key, value)` – добавление данных в стор по ключу
- `get(key)` – извлечение данных по ключу из стора
- `has(key)` – проверка по ключу наличия данных в сторе
- `delete(key)` – удаление данных из стора по ключу

Сами данные нужно хранить во внутренней переменной модуля, чтобы внешний доступ к ней напрямую через экземпляр `SingletonStore` был невозможен:

```js
const data = new Map();
```

Также нужно позаботиться о том, чтобы стор мог быть создан только в единственном экземпляре и при попытке многократного создания ссылался на один и тот же изначальный инстанс (реализуется через замыкание переменной `instance`, хранящей созданный экземпляр класса):

```js
constructor() {
  if (!instance) {
    instance = this;
  }
  return instance;
}
```
