---
title: Пульс веб-платформы 11.04.2025
description: Новости веб-платформы
pubDate: Apr 11 2025
heroImage: /blog-placeholder-pulse.jpg
tags:
  - Пульс_веб_платформы
---

### Новости

- [на ближайшем заседании Ecma TC39](https://github.com/tc39/agendas/blob/main/2025/04.md) будет обсуждаться в том числе [пропоузал ECMAScript enums](https://github.com/rbuckton/proposal-enum) (stage 1): кажется это хитрый план, как сделать enum-ы легальными в JS, и тогда не придётся их болезненно выпиливать из TS при будущем «встраивании» TS в браузеры
- [парни из e18e продолжают участвовать](https://e18e.dev/blog/community-showcase-q1.html) в улучшении фронтенд-экосистемы и напоминают о полезных проектах для авторов пакетов:
  - [arethetypeswrong](https://github.com/arethetypeswrong/arethetypeswrong.github.io) — анализирует пакет на предмет наличия проблем с конфигурацией TS-типов
  - [publint](https://github.com/publint/publint) — линтер `package.json` в пакете
  - [node-modules.dev](https://node-modules.dev/) — анализ зависимостей `node_modules`
  - [eslint-plugin-depend](https://github.com/es-tooling/eslint-plugin-depend) — плагин для eslint, находящий раздутые зависимости и ненужные полифиллы

### Проекты

- [git-mcp](https://github.com/idosal/git-mcp) — меняем урл github-репозитория (github.com/username/repo → gitmcp.io/username/repo) и получаем удалённый MCP-сервер, подключенный к этому репо «на лету»
- [Lighthouse Scoring Calculator](https://googlechrome.github.io/lighthouse/scorecalc/) — наглядный калькулятор того, как отдельные метрики влияют на очки в Lighthouse (самое большое влияние у CLS, TBT, LCP)

### Статьи и демки

#### JS

- [напоминание](https://piccalil.li/blog/simplify-sharing-with-built-in-apis-and-progressive-enhancement/), что помимо [Clipboard API](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API) существует ещё [Web Share API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Share_API) (которое пока недоступно в FF), но в режиме прогрессивного улучшение вполне сгодится
- [и ещё одно напоминание](https://waspdev.com/articles/2025-04-06/features-that-every-js-developer-must-know-in-2025) о полезных API, о которых постоянно забываешь:
  - в `"".replace()` и `"".replaceAll()` можно передавать колбек и модифицировать заматченный текст
  - [Promise.withResolvers()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers) позволяет «вытаскивать» наружу `resolve` и `reject` при создании промиса
  - `[10,20,30].at(-1)` вернёт последний элемент массива
- а также, как вы догадываетесь, [ещё одно напоминание](https://waspdev.com/articles/2025-04-09/features-that-every-js-developer-must-know-in-2025-part-2):
  - [Object.groupBy()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/groupBy) и [Map.groupBy()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/groupBy) сгруппируют элементы по переданному ключу
  - [FinalizationRegistry](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/FinalizationRegistry) стриггерит событие в момент, когда объект будет подчищен garbage collector-ом из памяти
- [что можно сделать](https://www.frontendjoy.com/p/how-i-reduced-my-react-bundle-size-by-30-with-real-examples), чтобы уменьшить размер основного React-бандла:
  - прочекать файлы на сайд-эффекты (`window.someBadSideEffect = 'hello'`)
  - не импортировать объект/класс из внешних пакетов целиком, лучше отдельными функциями
  - в React использовать [React.lazy](https://react.dev/reference/react/lazy) для ленивой подгрузки компонентов
  - импортировать не нужные сразу либы динамически:

```js
const Fuse = import("fuse.js").then((module) => module.default);
```

#### CSS

- `currentColor` или даже `cUrrENtCoLOr` хорошо подходит [для проброса цвета внутрь инлайн-SVG](https://frontendmasters.com/blog/using-currentcolor-in-2025/) (хотя то же можно сделать и кастомным свойством)

```css
nav {
  color: salmon;

  svg.icon {
    fill: currentColor;
    filter: drop-shadow(0 1px 0 oklch(from currentcolor calc(l - 0.25) c h));
  }
}
```

- свежеиспеченная функция `clip-path: shape()` (поддерживается в Chrome и Safari) позволяет более декларативно и человекочитаемо [описывать формы](https://developer.chrome.com/blog/css-shape) по сравнению с `clip-path: path()`
- трюк, [как сделать фоновые изображения полупрозрачными](https://blog.jim-nielsen.com/2025/background-image-opacity-css/): если фон под изображением одноцветный и равномерный, то можно слить картинку через режимы наложения:

```css
background-image: url(image-one.jpg), url(image-two.jpg);
background-color: rgba(255, 255, 255, 0.6);
background-blend-mode: lighten;
```

- [не забываем](https://piccalil.li/links/ua-plus/), что если завернуть любой селектор в `:where()`, то у него будет нулевая специфичность (годится для всяких ресетов) + годное свойство `text-decoration-skip-ink` для тюна подчёркивания ссылок:

```css
:where(a:not([class])) {
  text-decoration-skip-ink: auto;
  color: currentColor;
}
```

#### HTML

- так как md поддерживает HTML внутри, то в него можно вставить тег `<picture>` c [разными вариантами картинки для тёмной/светлой темы](https://cassidoo.co/post/md-dark-light-imgs/):

```html
<picture>
  <source media="(prefers-color-scheme: dark)" srcset="dark-mode-image.png" />
  <source media="(prefers-color-scheme: light)" srcset="light-mode-image.png" />
  <img src="default-image.png" />
</picture>
```

### Платформа

- [незаслуженно забытый паттер проектирования Use-case](https://practica.dev/blog/about-the-sweet-and-powerful-use-case-code-pattern/), код читается как «история», вызов отдельных функций складывается в повествование:

```js
const validatedorder = validateAndCoerceOrder (orderRequest);
const orderWithPricing = calculate0rderPricing(validated0rder);
const purchasingCustomer = await assertCustomerHasEnoughBalance (orderWithPricing);
...
```

- [прикольная история](https://blog.cloudflare.com/yarn-test-suffers-strange-derailment/) про то, как падение тестов Jest привело разработчика к шуточной программе `sl`, которая была создана для тех, кто напечатал команду `sl` вместо `ls` и выводит ASCII-паровоз в консоль (да уж, что только не прилетает вместе с `node_modules` к вам в комп)
