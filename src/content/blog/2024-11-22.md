---
title: "Пульс веб-платформы 22.11.2024"
description: "Новости веб-платформы"
pubDate: "Nov 22 2024"
heroImage: "/blog-placeholder-pulse.jpg"
tags: ["Пульс_веб_платформы"]
---

### Новости

- вышли [результаты опроса State of HTML](https://2024.stateofhtml.com/en-US), в целом, мало нового:
  - новые API типа Popover и `<dialog>` появляются (это хорошо), но есть баги, например, на [iOS не работает сокрытие при клике на backdrop](https://bugs.webkit.org/show_bug.cgi?id=267688) (это плохо)
  - некоторые новые API типа Anchor positioning и View transitions API только начинают расползаться по платформе и ещё не везде поддерживаются, соответственно проще их не использовать, чем поддерживать две версии
  - традиционная боль, которая мало утихает с годами, — стилизация и кастомизация элементов форм
  - в топе нехватающих элементов — data table, tabs, switch/toggle, skeleton-ui, context-menu, carousel, inifinite scroll — топ фич, для реализации в либах веб-компонентов
- [вышел Chrome 131](https://developer.chrome.com/blog/new-in-chrome-131):
  - псевдоэлементы `::selection` и `::highlight` теперь более логично наследуют значения CSS-свойств родителей
  - к `<details>` и `<summary>` теперь можно применять `display: flex` и `grid`
  - починили `@property` и теперь поддерживается тип `<string>`
  - в элементе `<select>` теперь валидно включать другие теги помимо `<option>`, `<optgroup>` и `<hr>`
  - `currentcolor` поддержан для relative color syntax
  - Summarization и Translator API для суммаризации и перевода с помощью AI, встроенного в браузер
  - в [дев-тулзы](https://developer.chrome.com/blog/new-in-devtools-131) также завезли AI, появилась даж отдельная вкладка в настройках, теперь и браузер будет советовать, как писать код лучше
- департамент юстиции США может [надавить на Google и заставить продать Chrome](https://www.forbes.com/sites/antoniopequenoiv/2024/11/18/justice-department-will-request-judge-order-google-to-sell-chrome-in-antitrust-case-report-says/) предположительно родительской компании Alphabet, чтобы более явно отслеживать по взаимодействию двух компаний, как через Chrome Google манипулирует рекламным рынком, и уменьшить возможности собора данных для AI через Chrome
- есть в языке и стандартной платформе такие узкоспециализированные фичи, которые нужны достаточно редко, поэтому забываются и вовремя не вспоминаются, когда бы пригодились; например, [`Symbol` может пригодиться](https://www.stefanjudis.com/today-i-learned/hide-object-properties-with-javascript-symbols/), чтобы спрятать поле или метку в объекте без боязни, что оно где-то вылезет, так символьные поля объекта недоступны в `Object.keys()` и `JSON.stringify()`

### Проекты

- [react-scan](https://github.com/aidenybai/react-scan) — либа для проверки перфоманса в React-приложениях, подключается с помощью одного скрипта (наконец-то достаточно просто, чтобы (любопытство пересилило лень) попробовать на вашей приложухе) и показывает ререндеры: хороший способ отследить наличие ненужных рендеров, а также обнаружить зависимость между несвязанными друг с другом компонентов
- [jscodeshift](https://github.com/facebook/jscodeshift) — если вам нужно зараз изменить много JS/TS-файлов, то не обязательно это делать руками и писать велосипед: есть придуманный тулкит для запуска codemod-ов (программ, которые сделают нужные изменения в файлах) и получения отчёта о выполненной работе

### Статьи и демки

#### JS

- раньше уже писал про команду `deno complile`, а тут как раз вышел [обзор с интересной мыслью](https://deno.com/blog/deno-compile-executable-programs): помимо очевидного юзкейса собрать в бинарник свою JS/TS-программу и запускать её на десктопе (как будто бы дело не первой необходимости), ещё можно собирать ваше приложение с вереницей npm-пакетов в зависимостях в один файл и уже его транспортировать на CI вместо того, чтобы на самом CI разворачивать приложение и там скачивать и устанавливать все зависимости — как минимум это сэкономит время работы и мощности CI
- в догонку к вопросу экономии ресурсов CI: в вашем `package.json` файле `devDependencies` отличаются от `dependencies` тем, что [не будут установлены на CI](https://angelika.me/2024/11/11/dependencies-vs-dev-dependencies-javascript-apps/), ведь они нужны только локально при разработке; запускать production-вариант сборки можно ключом `npm install --production`, переменной `NODE_ENV=production`, а также ключом `--omit=dev`
- если вы когда-нибудь [пытались завести проект](https://abdisalan.com/posts/tragedy-running-old-node-project) *несколько*летней давности, то наверняка испытывали фрустрацию, когда что-то почему-то не работает и нужно методом тыка и гуглежа и выяснять, что именно, и потому знаете, что самое верное средство — попереключать версии node и python, чтобы найти заветную рабочую комбинацию!
- один из методов защиты от таких фрустраций и потерянного времени — [не использовать билд-систему совсем](https://jvns.ca/blog/2024/11/18/how-to-import-a-javascript-library/): то есть можно установить либу из npm во временную папку, руками оттуда скопировать сбилженные JS-файлы и подключить их руками на сайте: с обычным js-файлом проблем нет совсем, с ESM-файлом нужно озаботиться import map-ами, если внутри модуль включает зависимости, а вот с CJS-файлами придётся использовать [esm.sh](https://esm.sh/#docs) для преобразования их в в ESM
- если вы паблишили npm-пакеты, то наверняка знаете про команды `npm version major/minor/patch`, и для пререлизов (альфа/бета ) [тоже есть подобные команды](https://cloudfour.com/thinks/how-to-prerelease-an-npm-package/): `npm version premajor --preid=alpha` сменит `23.1.6` на `24.0.0-alpha.0`, а `npm version prerelease` бампнет версию с `24.0.0-alpha.0` до `24.0.0-alpha.1`
- мы используем те или иные инструменты, потому что они делают свою работу, и привыкаем терпеть их несовершенство, так как или им нет альтернатив, или альтернативы чересчур нишевые и маргинальные; но если [посмотреть со стороны](https://korban.net/posts/elm/2024-11-16-typescript-react-impressions/), то картина сразу становится очевидной — React и TS достаточно вербозны и не лишены недостатков

#### CSS

- в пошаговой анимации `steps(5)` указывается количество шагов, на сколько разделить анимацию, но [также есть дополнительная настройка](https://css-tip.com/steps/), указывающая как именно выставляются эти шаги:  0%, 20%, 40%, 60% и 80%, или же 20%, 40%, 60%, 80% и 100%, или же 0%, 25%, 50%, 75% и 100%; настройка `steps(3, jump-none)` разделит шаги на равные интервалы, что более логичное, но не дефолтное значение
- если есть задача выполнять повторяющуюся анимацию с задержкой до начала и после окончания, то можно обойтись без «фейковых пустот» в кейфреймах, а использовать функцию `linear()` [для динамического расчёта задержки](https://codepen.io/nocksock/pen/rNEPMjJ?editors=1100)
