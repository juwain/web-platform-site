---
title: "Пульс веб-платформы 06.12.2024"
description: "Новости веб-платформы"
pubDate: "Dec 06 2024"
heroImage: "/blog-placeholder-pulse.jpg"
tags: ["Пульс_веб_платформы"]
---

**Новости**

- вышел релиз библиотеки компонентов React Aria/Spectrum: добавлены компоненты [Disclosure](https://react-spectrum.adobe.com/react-spectrum/Disclosure.html) and [Accordion](https://react-spectrum.adobe.com/react-spectrum/Accordion.html); что примечательно, под капотом не используется summary/details, видимо ещё не до конца распространилось стабилизировавшееся API; также в React Aria появился компонент [ToggleButtonGroup](https://react-spectrum.adobe.com/react-aria/ToggleButtonGroup.html), управляемый с клавиатуры; также либа теперь полностью [Typescript Strict](https://www.typescriptlang.org/tsconfig/#strict)-совместима
- [выпущен Astro 5.0](https://astro.build/blog/astro-5/): всё то же, что было в бете (Content Layer — запрос контента из внешнего ресурса, Server Islands — отложенный рендеринг с сервера, `astro:env` — типобезопасный env-ы) + экспериментальные фичи для отображения респонсив-картинок, кропа, а также импорта SVG-компонентов
- [вышла стабильная версия React 19](https://react.dev/blog/2024/12/05/react-19): помимо новых API теперь одинаковые подключенные стили не будут дублироваться и будут подключаться в указанном порядке, также можно указывать `<meta>` без дополнительных либ и ещё полностью поддерживаются кастомные элементы (веб-компоненты)
- [вышла версия Prettier 3.4](https://prettier.io/blog/2024/11/26/3.4.0.html): просто напоминание обновить в вашем проекте, так как было пофикшено много багов (кажется в таком проекте их невозможно пофиксить все)

**Проекты**

- представьте, что вы разработчик нового React-фреймворка и хотите, чтобы приложение, написанное на вашем фреймворке, могло одной кнопкой деплоиться на Vercel, Netlify и ещё многие другие хостинги… Создание адаптеров ко всем сервисам и поддержка этого добра сразу начинает навевать тоску. Но выход есть! Можно использовать oss-наработку [vinxi](https://github.com/nksaraf/vinxi), чтобы одной строчкой в Vite-конфиге подключить поддержку определённого провайдера, как и сделал [Tanner Linsley в своём фреймворке TanStack Start](https://tanstack.com/blog/why-tanstack-start-is-ditching-adapters)
- [onlook](https://github.com/onlook-dev/onlook) — oss визуальный редактор React-приложения: люди всё не оставляют попыток избавиться от разделения макет/код, собственно, чтобы был только код и «макет» накидывался сразу в коде
- [react-verification-input](https://github.com/andreaswilli/react-verification-input) — маск-инпут для ввода пин-кодов, React
- [dontfuckwithscroll](https://dontfuckwithscroll.com) — не воруйте скролл, наглядное пособие

**Статьи и демки**

**JS**

- если вы знаете куда с одной страницы пользователь пойдёт дальше, можно [предзагрузить или даже пререндерить этот урл](https://csswizardry.com/2024/12/a-layered-approach-to-speculation-rules/); для этого с помощью Speculation Rules API в скрипте `<script type="speculationrules">` нужно указать секцию `prerender` и `prefetch` с возможной настройкой условий запуска (если адрес включает строку, селектор соответствует выражению и тп); пока работает только в Chromium
- при создании модалки нужно по-хорошему [предусмотреть много вещей](https://www.developerway.com/posts/hard-react-questions-and-modal-dialog): интерфейс, триггерный элемент для показа модалки, передачу кастомного контента и класснеймов, обработчики событий, рендер в Portal-е, управление фокусом внутри модалки; в общем, проще всего взять готовую безголовую либу, например,  [Radix](https://www.radix-ui.com/themes/docs/components/dialog) или [React Aria](https://react-spectrum.adobe.com/react-aria/) и прикрутить свою логику и стили
- если стоит задача заняться перфомансом, то можно начать с `PerformanceObserver`, с помощью которого можно программно получить не только разовое значение метрик (FID, CLS, LCP), но и [обсёрвить](https://www.trevorlasn.com/blog/performance-web-api-in-javascript), то есть повторно снимать метрики во время пользования приложением
- а что если не рендерить SPA-целиком в `<div id="root">`, а подгружать React только [в определённый интерактивный островок](https://swizec.com/blog/the-anatomy-of-a-react-island/) вашего сайта? да не, бред какой-то… или нет?
- с View Transitions API можно методом `startViewTransition` запустить нативную плавную смену двух DOM-нод; но что если как раз императивно запускать не хочется, а хочется, чтобы DOM-нода добавилась и [транзишн автоматом выполнился](https://www.bram.us/2024/11/25/experiment-automatically-triggered-view-transitions-with-mutationobserver/)? Берём `MutationObserver` и вуаля: нода появилась, обсёрвер триггернулся, колбек запустился, а в нём уже и `startViewTransition`

**CSS**

- если нужно создать у элемента [эффект замёрзшего стекла](https://www.tyleo.com/html-glass.html), рецепт: взять `backdrop-filter: blur(10px)` и насыпать кучу теней для создания глубины; для создания [«стеклянной прозрачности» у блока определённой формы](https://www.joshwcomeau.com/css/backdrop-filter/) можно добавить ещё и `mask-image`
- [единицы измерения `lh`](https://www.trevorlasn.com/blog/css-lh-and-rlh-units) — величина вычисленного значения `line-height`, её удобно использовать для задания динамических отступов между тестовыми блоками (`rlh` — аналог для рутового элемента)
- впервые встретился такой UI-элемент, [кнопка в трёх состояниях](https://frontendmasters.com/blog/multi-state-buttons/) (да, нет, не знаю): её можно реализовать на чекбоксах, `:has(:checked)` и `pointer-events`

**HTML**

- в HTML у ссылок `<a>` есть атрибут `ping` — [легальный способ отслеживать нажатие по ссылке](https://jsdev.space/html-ping-attribute/), отсылая запрос по указанному в значении адресу, которое к тому же сложнее заблочить
- напоминание в следующий раз, когда будете [собирать форм-визард](https://www.smashingmagazine.com/2024/12/creating-effective-multistep-form-better-user-experience/), использовать `<fieldset>` для каждого «шага» с набором полей (правда, если не столкнётесь с проблемой стилизации, хехе)

**Платформа**

- [при принятии решения](https://www.joshwcomeau.com/css/browser-support/) использовать ли платформенную фичу или нет, обычно руководствуются браузерной поддержкой глобальной CanIUse, но суть в том, что аудитория именно вашего сервиса может существенно от глобальной; в таком случае логично использовать аналитику своей аудитории, и данные, например, Google Analytics или Simple Analytics [можно скормить самому CanIUse](https://caniuse.com/ciu/import)
