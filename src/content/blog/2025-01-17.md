---
title: Пульс веб-платформы 17.01.2025
description: Новости веб-платформы
pubDate: Jan 17 2025
heroImage: /blog-placeholder-pulse.jpg
tags: ["Пульс_веб_платформы"]
---

### Новости

- [вышел Chrome 132](https://developer.chrome.com/release-notes/132):
  - улучшены события и исправлены баги для элементов popover и dialog
  - продолжают допиливать CSS Anchor Positioning
  - заголовки `Strict-Transport-Security (STS)` теперь игнорятся для `localhost`
  - довыкатили Keyboard focusable scroll containers, которые раньше забаговали
  - [File System Access API](https://developer.chrome.com/docs/capabilities/web-apis/file-system-access) стало доступно на Android-девайсах и WebView
- [вышел Firefox 134.0](https://www.mozilla.org/en-US/firefox/134.0/releasenotes/):
  - поддержан [`Promise.try()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/try), теперь он кроссбраузерный
  - экспериментально добавлена поддержка `Intl.DurationFormat`
  - поправлен баг с применением [`align-self`](https://developer.mozilla.org/en-US/docs/Web/CSS/align-self) и [`justify-self`](https://developer.mozilla.org/en-US/docs/Web/CSS/justify-self) к абсолютно позиционированным элементам
- [в Node.js v22.13.0](https://nodejs.org/en/blog/release/v22.13.0) стабилизирована фича [Permission Model](https://nodejs.org/api/permissions.html#permissions): это «ремень безопасности» для вашего кода, а не защита от чужого вредоносного кода; запуск файла с флагом `node --permission index.js` по умолчанию обрежет все права (чтение и запись в fs, порождение процессов…), а указание явных флагов типа `--allow-fs-read` и `--allow-fs-write` уже включит только нужное
- [в Bun v1.1.43](https://bun.sh/blog/bun-v1.1.43#html-bundler) появился экспериментальный HTML Bundler: команда `bun build --experimental-html --experimental-css ./index.html --outdir=dist` склеит все js-, css-файлы и ассеты в один файл и подключит их в итоговом html-файле
- WinterCG, группа разрабочиков Deno, [слилась с Ecma International](https://deno.com/blog/wintertc), сформировала новый [комитет TC55](https://wintercg.org) и выпустила первый черновик их стандарта [Minimum Common Web Platform API](https://min-common-api.proposal.wintercg.org), где собраны список базовых API для конситентности между разными JS-райнтаймами
- [в React-е (и Next-е) появится](https://github.com/facebook/react/pull/31975) первое API про анимацию — компонент `<ViewTransition>` на основе View Transitions API ([не поддерживается только в FF](https://caniuse.com/view-transitions)), обещают удобство в работе с Suspence, под капотом React будет в определённый момент назначать элементу `view-transition-name` и вызывать `startViewTransition` во время мутации DOM-а:

```jsx
<ViewTransition>
  <Suspense fallback={<Skeleton />}>
    <Content />
  </Suspense>
</ViewTransition>
```

### Проекты

- [emojico](https://github.com/threepointone/emojico) — cli-теда для генерации набора favicon-ок из эмодзи: под капотом буднично открывается puppeteer и снимается скриншот со страницы с иконкой
- [@smoores/epub](https://www.npmjs.com/package/@smoores/epub) — оказывается формат электронных книг epub — [открытый стандарт W3C](https://www.w3.org/TR/epub-33/), и это либа для работы с epub-файлами
- [react-focus-lock](https://github.com/theKashey/react-focus-lock) — «ловушка» фокуса при показе модалок

### Статьи и демки

#### JS

- спред объекта/массива в объекте не скопирует его, а создаст ссылку на него `const state = { ...defaultState, prop: value }` — это механизм Shallow Copy; если же нужно [именно склонировать объект](https://philna.sh/blog/2024/12/30/shallow-clones-versus-structured-clones/), то в современном JS для этого есть специальный метод `structuredClone` (поддерживается везде с 2022):

```js
const state = structuredClone(defaultState);
state.prop = value;
```

- доля ESM-only и dual (ESM + CJS) npm-пакетов [медленно, но верно растёт](https://github.com/wooorm/npm-esm-vs-cjs): в ноябре 2024 у CJS 63%, у dual + ESM 25%
- [напоминание для реактоводов](https://tigerabrodi.blog/how-reacts-render-effects-and-refs-work-under-the-hood): рефы обрабатываются до `useLayoutEffect` и `useEffect`

#### CSS

- псевдокласс `:empty` помогает [скрыть элементы с пустым контентом](https://gomakethings.com/the-empty-pseudo-class-in-css/) (правда пока что в браузеры не доехало [обновление спеки по этому поводу](https://drafts.csswg.org/selectors-4/#the-empty-pseudo), то есть блок с пробелами скрыт не будет):

```css
.list > div:empty {
  display: none;
}
```

- бонус использования нативного `<dialog>` — [его части легко стилизовать](https://cassidoo.co/post/css-for-dialogs/): подложка `dialog::backdrop {}`, убирание скролла `body:has(dialog[open]) { overflow: hidden }`

### Платформа

- в современных браузерах [изменился подход к кешированию ресурсов](https://addyosmani.com/blog/double-keyed-caching/): если раньше файл мог быть единожды закеширован по урлу и потом для другого сайта браться из общего кеша `"https://cdn.example.com/jquery-3.6.0.min.js": resourceData`, то теперь для защиты от отслеживания для каждого сайта кеш файла будет храниться отдельно `{ topLevelSite: "site-a.com", resource: "https://cdn.example.com/jquery-3.6.0.min.js" }: resourceData`; как следствие — больше нет выгоды от CDN, дешевле селф-хостить на своём домене типа `static.company.com/js/react.js`
- [для базовой доступности](https://martijnhols.nl/blog/accessibility-essentials-every-front-end-developer-should-know) достаточно использовать теги по назначению (кнопки, формы, лейблы + инпуты), не убирать стили фокуса, при открытой модалке ловить фокус и «выключать» контент под ней атрибутом `inert`, расширять область клика на интерактивных элементах
