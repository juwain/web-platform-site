---
title: "Пульс веб-платформы 21.06.2024"
description: "Новости веб-платформы"
pubDate: "Jun 21 2024"
heroImage: "/blog-placeholder-pulse.jpg"
---

**#Пульс*веб*платформы 21.06.2024**

**Новости**

- в спецификацию CSS-values-5 [будет добавлен синтаксис инлайновых условий](https://x.com/LeaVerou/status/1801192208025940200) для кастомных свойств ([логичное продолжение style-container-queries только для всего](https://lea.verou.me/blog/2024/css-conditionals/)), можно будет писать так:

```css
background-color: if(style(--variant: success), var(--color-success-60));
border-radius: if(style(--shape: pill) ? 999em: 0.2em);
```

- [вышла Node 22.3.0](https://nodejs.org/en/blog/release/v22.3.0): в тест-раннер добавлено снепшотное тестирование
- [в React-сообществе бомбануло](https://blog.codeminer42.com/how-react-19-almost-made-the-internet-slower/), что в 19 rc версии асинхронные сиблинги в `<Suspence>` стали рендериться последовательно, а раньше было параллельно (что использовалось, к примеру, в tanstack-query); команде React пришлось признать, что они недооценивали, сколько людей продолжают делать SPA, а не рендерить на сервере и отложить релиз 19 версии (что забавно, [pr спокойно себе был в работе с марта 2023](https://github.com/facebook/react/pull/26380))
- [опубликованы результаты опроса State of JS 2023](https://2023.stateofjs.com/) (преимущественно американцы и европейцы мужчины среднего возраста поделились, что думают): в JS из коробки не хватает статической типизации, боль вызывает ситуация с ESM/CJS-модулями, поддержка TS, работа с датами, браузерная поддержка (особенно Safari); Vite многие пользуют и почти все довольны (то же актуально для Vitest), что не скажешь о webpack — пользуют меньше и больше недовольных; у Next и Vue сравнимое количество использующих и недовольных; недовольных React становится больше; растёт популярность pnpm в том числе как инструмента организации монореп

**Проекты**

- [React Internals Explorer](https://jser.dev/2024-05-11-introducing-rie/) — визуализация происходящего в дереве рендера React, в том числе проиллюстрирован пример с `<Suspence>`: в SPA в 18 версии React они будут рендериться параллельно, а в rc 19 — последовательно

**Статьи и демки**

**JS**

- [как использовать встроенный тест-раннер Node](https://nodejs.org/en/learn/test-runner/using-test-runner), в том числе свежедобавленное снепшотное тестирование: `describe`, `mock`, `it` живут в `node:test`, как и `snapshot`; названия утилит классические, API вполне предсказуемый; `snapshot` сам по себе не рендерит компоненты, а работает в паре с каким-либо рендерером, например, `@testing-library/react`
- вроде и маркетинговая статья, но как-то [честно составленная](https://blog.platformatic.dev/nodejs-is-here-to-stay): Node — самая популярная технология, скачивания растут, баги правятся, плюшки появляются: `ems`, `fetch`, `watch`, `AsyncLocalStorage`, `WebCrypto`
- [Page Visibility API — сто лет в обед](https://developer.mozilla.org/en-US/blog/using-the-page-visibility-api/), но как-то не на слуху, используется, например, чтобы на событии visibilitychange, когда страница не просматривается, отправить аналитику или понизить битрейт проигрываемого видео
- проблема, которую решает React Compiler с автомемоизацией состояния в компонентах, уже [давно решена из коробки в MobX](https://www.mikejohnson.dev/posts/2024/06/mobx-react-compiler) (видимо поэтому [MobX помечен как несовместимый с RC](https://github.com/facebook/react/blob/0f568418d2c9cd3d5f32eeb40d7305211bd17ccd/compiler/packages/react-compiler-healthcheck/src/config.ts#L2))

**CSS**

- [единица измерения 1cap](https://ishadeed.com/article/css-cap-unit/) — это высота заглавной буквы в шрифте, если нужно сделать что-то такой высоты (например, отступ между словами или размеры иконки), то можно пользовать (доступно во всех браузерах с декабря 2023)
- в браузерах в последнее время имплементировано много CSS-фишек, но [не все доступны повсеместно](https://www.stefanjudis.com/blog/safari-18-what-web-features-are-usable-across-browsers/): пока нельзя использовать View transitions, Style Queries, `@starting-style`, зато можно `URL.parse()`, Safe flexbox alignment, `currentcolor` в relative color syntax
- [редкий юзкейс для em](https://bradfrost.com/blog/post/a-rare-use-case-for-em-units/) — для задания размера отступа `text-underline-offset`

**HTML**

- [в Chrome предложили элемент `<permission>`](https://developer.chrome.com/blog/permission-element-origin-trial), который встраивается в страницу и показывает, какие есть доступы к камере и микрофону, а также позволяет включить или выключить их; интересно, 1) как с появлением веб-компонентов и React расширилось понимание элементов страницы, 2) что элемент будет не веб-компонентом, а именно стандартным браузерным элементом, чтобы гарантировано сделать его визуально доступным с ограничениями по стилизации

**Платформа**

- помню, когда GitHub выкатили GraphQL-песочницу, было интересно её тыкать, казалось, вот она — настоящая гибкость, но в итоге [оказалось всё не так радужно](https://bessey.dev/blog/2024/05/24/why-im-over-graphql/): не легко спрятать за авторизацию частичные поля и наоборот легко с клиента отправить схему, которая выгребет мегабайты JSON-а, а также есть другие проблемы; а подходит GQL в случае, если есть контроль над всеми клиентами, их <= 3 и сервер и клиенты написаны на разных языках
